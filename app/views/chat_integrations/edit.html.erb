<div class="space-y-6">
  <!-- Page Header -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <div class="w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center">
          <% case @chat_integration.platform %>
          <% when 'slack' %>
            <svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 24 24">
              <path d="M6.194 14.644c0 1.16-.943 2.107-2.106 2.107-1.163 0-2.106-.947-2.106-2.107 0-1.16.943-2.106 2.106-2.106 1.163 0 2.106.946 2.106 2.106zm5.74-2.106c0 1.16-.943 2.106-2.106 2.106-1.163 0-2.106-.946-2.106-2.106 0-1.16.943-2.107 2.106-2.107 1.163 0 2.106.947 2.106 2.107zm5.74 0c0 1.16-.943 2.106-2.106 2.106-1.163 0-2.106-.946-2.106-2.106 0-1.16.943-2.107 2.106-2.107 1.163 0 2.106.947 2.106 2.107zm-5.74-2.106c0-1.16-.943-2.106-2.106-2.106-1.163 0-2.106.946-2.106 2.106 0 1.16.943 2.106 2.106 2.106 1.163 0 2.106-.946 2.106-2.106zm-5.74 0c0-1.16-.943-2.106-2.106-2.106-1.163 0-2.106.946-2.106 2.106 0 1.16.943 2.106 2.106 2.106 1.163 0 2.106-.946 2.106-2.106z"/>
            </svg>
          <% when 'google_chat' %>
            <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
          <% when 'microsoft_teams' %>
            <svg class="w-8 h-8 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
          <% else %>
            <svg class="w-8 h-8 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
            </svg>
          <% end %>
        </div>
        <div>
          <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Edit Integration</h1>
          <p class="text-gray-600 dark:text-gray-300 mt-1">Update <%= @chat_integration.platform_display_name %> integration</p>
          <div class="mt-2 flex items-center space-x-2">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium <%= @chat_integration.active? ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200' : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200' %>">
              <%= @chat_integration.active? ? 'Active' : 'Inactive' %>
            </span>
            <span class="text-sm text-gray-500 dark:text-gray-400">• <%= @chat_integration.team_chat_configs.count %> team configs</span>
          </div>
        </div>
      </div>
      <div class="text-right">
        <%= link_to "Back to Integration", chat_integration_path(@chat_integration), 
            class: "inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
      </div>
    </div>
  </div>

  <!-- Integration Edit Form -->
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700">
    <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
      <h2 class="text-lg font-medium text-gray-900 dark:text-white">Integration Details</h2>
      <p class="text-sm text-gray-600 dark:text-gray-300">Modify the integration configuration</p>
    </div>

    <%= form_with model: @chat_integration, local: true, class: "divide-y divide-gray-200 dark:divide-gray-700" do |form| %>
      <div class="px-6 py-6 space-y-6">
        <!-- Platform Display -->
        <div>
          <label class="block text-sm font-medium text-gray-900 dark:text-white mb-2">Platform</label>
          <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center">
              <% case @chat_integration.platform %>
              <% when 'slack' %>
                <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M6.194 14.644c0 1.16-.943 2.107-2.106 2.107-1.163 0-2.106-.947-2.106-2.107 0-1.16.943-2.106 2.106-2.106 1.163 0 2.106.946 2.106 2.106zm5.74-2.106c0 1.16-.943 2.106-2.106 2.106-1.163 0-2.106-.946-2.106-2.106 0-1.16.943-2.107 2.106-2.107 1.163 0 2.106.947 2.106 2.107zm5.74 0c0 1.16-.943 2.106-2.106 2.106-1.163 0-2.106-.946-2.106-2.106 0-1.16.943-2.107 2.106-2.107 1.163 0 2.106.947 2.106 2.107zm-5.74-2.106c0-1.16-.943-2.106-2.106-2.106-1.163 0-2.106.946-2.106 2.106 0 1.16.943 2.106 2.106 2.106 1.163 0 2.106-.946 2.106-2.106zm-5.74 0c0-1.16-.943-2.106-2.106-2.106-1.163 0-2.106.946-2.106 2.106 0 1.16.943 2.106 2.106 2.106 1.163 0 2.106-.946 2.106-2.106z"/>
                </svg>
              <% when 'google_chat' %>
                <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              <% when 'microsoft_teams' %>
                <svg class="w-6 h-6 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
              <% else %>
                <svg class="w-6 h-6 text-gray-600 dark:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                </svg>
              <% end %>
            </div>
            <span class="text-lg font-medium text-gray-900 dark:text-white"><%= @chat_integration.platform_display_name %></span>
            <span class="text-sm text-gray-500 dark:text-gray-400">(Platform cannot be changed)</span>
          </div>
        </div>

        <!-- Configuration -->
        <div>
          <%= form.label :config, "Configuration (JSON)", class: "block text-sm font-medium text-gray-900 dark:text-white mb-2" %>
          <p class="text-sm text-gray-600 dark:text-gray-300 mb-3">Update the configuration details for this platform</p>
          <%= form.text_area :config, 
              value: @chat_integration.config.present? ? @chat_integration.config : '',
              rows: 8,
              class: "block w-full border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm font-mono bg-white dark:bg-gray-700 text-gray-900 dark:text-white",
              placeholder: '{"webhook_url": "https://hooks.slack.com/services/...", "channel": "#general"}' %>
        </div>

        <!-- Status -->
        <div class="flex items-center">
          <div class="flex items-center h-5">
            <%= form.check_box :active, 
                class: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700" %>
          </div>
          <div class="ml-3 text-sm">
            <%= form.label :active, "Active", class: "font-medium text-gray-900 dark:text-white" %>
            <p class="text-gray-500 dark:text-gray-400">Enable this integration for use</p>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600">
        <div class="flex justify-between items-center">
          <%= link_to "Cancel", chat_integration_path(@chat_integration), 
              class: "inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
          
          <div class="flex space-x-3">
            <%= link_to "Delete Integration", chat_integration_path(@chat_integration), 
                method: :delete,
                data: { confirm: 'Are you sure you want to delete this integration? This will also remove all team configurations.' },
                class: "inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 shadow-sm text-sm font-medium rounded-md text-red-700 dark:text-red-300 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" %>
            
            <%= form.submit "Update Integration", 
                class: "inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Current Integration Info -->
  <div class="bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-6">
    <div class="flex">
      <div class="flex-shrink-0">
        <svg class="h-5 w-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-gray-800 dark:text-gray-200">Current Integration Information</h3>
        <div class="mt-2 text-sm text-gray-700 dark:text-gray-300">
          <p><strong>Platform:</strong> <%= @chat_integration.platform_display_name %></p>
          <p><strong>Status:</strong> <%= @chat_integration.active? ? 'Active' : 'Inactive' %></p>
          <p><strong>Company:</strong> <%= @chat_integration.company.name %></p>
          <p><strong>Teams Configured:</strong> <%= @chat_integration.team_chat_configs.count %></p>
          <p><strong>Created:</strong> <%= @chat_integration.created_at.strftime("%B %d, %Y") %></p>
          <p><strong>Last Updated:</strong> <%= @chat_integration.updated_at.strftime("%B %d, %Y") %></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Platform Configuration Help -->
  <div class="bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg p-6">
    <div class="flex">
      <div class="flex-shrink-0">
        <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
        </svg>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-blue-800 dark:text-blue-200">Configuration Examples for <%= @chat_integration.platform_display_name %></h3>
        <div class="mt-2 text-sm text-blue-700 dark:text-blue-300">
          <% case @chat_integration.platform %>
          <% when 'slack' %>
            <div class="space-y-2">
              <p><strong>Slack Webhook:</strong></p>
              <pre class="text-xs bg-blue-100 dark:bg-blue-800 p-2 rounded text-blue-900 dark:text-blue-100">{"webhook_url": "https://hooks.slack.com/services/...", "channel": "#general"}</pre>
              <p class="text-xs">Get webhook URL from Slack App settings → Incoming Webhooks</p>
            </div>
          <% when 'google_chat' %>
            <div class="space-y-2">
              <p><strong>Google Chat Webhook:</strong></p>
              <pre class="text-xs bg-blue-100 dark:bg-blue-800 p-2 rounded text-blue-900 dark:text-blue-100">{"webhook_url": "https://chat.googleapis.com/v1/spaces/...", "thread_key": "..."}</pre>
              <p class="text-xs">Get webhook URL from Google Chat → Space settings → Webhooks</p>
            </div>
          <% when 'microsoft_teams' %>
            <div class="space-y-2">
              <p><strong>Microsoft Teams Webhook:</strong></p>
              <pre class="text-xs bg-blue-100 dark:bg-blue-800 p-2 rounded text-blue-900 dark:text-blue-100">{"webhook_url": "https://outlook.office.com/webhook/...", "channel": "General"}</pre>
              <p class="text-xs">Get webhook URL from Teams → Channel → Connectors → Incoming Webhook</p>
            </div>
          <% else %>
            <p>Configure the integration settings according to your platform's requirements.</p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
